<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHYRED - Register</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #0a0b1a;
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* CSS Variables */
        :root {
            --cyber-dark: hsl(230, 25%, 3%);
            --cyber-purple: hsl(280, 90%, 65%);
            --cyber-blue: hsl(220, 90%, 60%);
            --cyber-pink: hsl(320, 85%, 70%);
            --cyber-glow: hsl(280, 100%, 75%);
        }

        /* Container */
        .container {
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }

        /* Background Effects */
        .background-gradient {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--cyber-dark) 0%, var(--cyber-dark) 60%, rgba(147, 51, 234, 0.2) 100%);
            z-index: 1;
        }

        .particles-container {
            position: absolute;
            inset: 0;
            z-index: 2;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--cyber-glow);
            border-radius: 50%;
            opacity: 0.6;
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }

        .auth-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .auth-card {
            background: rgba(10, 11, 26, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(180, 71, 235, 0.3);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 1200px;
            min-height: 90vh;
            box-shadow: 0 20px 60px rgba(180, 71, 235, 0.2);
            position: relative;
            overflow: hidden;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        /* Custom Scrollbar */
        .auth-card::-webkit-scrollbar {
            width: 8px;
        }

        .auth-card::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .auth-card::-webkit-scrollbar-thumb {
            background: var(--cyber-purple);
            border-radius: 4px;
            opacity: 0.7;
        }

        .auth-card::-webkit-scrollbar-thumb:hover {
            background: var(--cyber-glow);
            opacity: 1;
        }

        /* Firefox scrollbar */
        .auth-card {
            scrollbar-width: thin;
            scrollbar-color: var(--cyber-purple) rgba(0, 0, 0, 0.3);
        }
        
        .auth-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--cyber-purple), var(--cyber-blue), var(--cyber-pink));
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .form-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .form-left {
            display: flex;
            flex-direction: column;
        }

        .form-right {
            display: flex;
            flex-direction: column;
        }
        
        .auth-logo {
            font-size: 48px;
            font-weight: 900;
            background: linear-gradient(45deg, var(--cyber-purple), var(--cyber-blue));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .auth-subtitle {
            color: #9ca3af;
            font-size: 16px;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .form-label {
            display: block;
            color: #d1d5db;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(180, 71, 235, 0.3);
            border-radius: 12px;
            padding: 15px 45px 15px 15px;
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--cyber-glow);
            box-shadow: 0 0 0 3px rgba(180, 71, 235, 0.2);
            background: rgba(0, 0, 0, 0.6);
        }
        
        .form-input::placeholder {
            color: #6b7280;
        }
        
        .input-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
            font-size: 20px;
            pointer-events: none;
        }
        
        .username-prefix {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--cyber-glow);
            font-weight: 600;
            pointer-events: none;
        }
        
        .username-input {
            padding-left: 90px !important;
        }
        
        .file-upload-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-left .file-upload-group {
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .file-upload {
            border: 2px dashed rgba(180, 71, 235, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .file-upload:hover {
            border-color: var(--cyber-glow);
            background: rgba(180, 71, 235, 0.1);
        }
        
        .file-upload input {
            display: none;
        }
        
        .file-upload-icon {
            font-size: 32px;
            color: var(--cyber-glow);
            margin-bottom: 10px;
        }
        
        .file-upload-text {
            color: #d1d5db;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .file-upload-hint {
            color: #6b7280;
            font-size: 12px;
        }
        
        .file-preview {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            margin: 10px auto;
            display: none;
        }
        
        .avatar-preview {
            border-radius: 50%;
        }
        
        .terms-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin: 25px 0;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            border: 1px solid rgba(180, 71, 235, 0.2);
        }

        .form-right .terms-checkbox {
            margin-top: 30px;
            margin-bottom: 20px;
        }
        
        .terms-checkbox input {
            margin-top: 3px;
            accent-color: var(--cyber-purple);
        }
        
        .terms-text {
            color: #d1d5db;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .terms-text a {
            color: var(--cyber-glow);
            text-decoration: none;
        }
        
        .terms-text a:hover {
            text-decoration: underline;
        }
        
        .register-btn {
            width: 100%;
            background: linear-gradient(45deg, var(--cyber-purple), var(--cyber-blue));
            border: none;
            border-radius: 12px;
            padding: 15px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .register-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(180, 71, 235, 0.4);
        }
        
        .register-btn:disabled {
            background: linear-gradient(45deg, #6b7280, #4b5563);
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .login-link {
            text-align: center;
            color: #9ca3af;
        }
        
        .login-link a {
            color: var(--cyber-glow);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        
        .login-link a:hover {
            color: var(--cyber-blue);
            text-shadow: 0 0 10px var(--cyber-blue);
        }
        
        .back-home {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(180, 71, 235, 0.3);
            border-radius: 50px;
            padding: 10px 20px;
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
            backdrop-filter: blur(10px);
            z-index: 100;
        }
        
        .back-home:hover {
            background: rgba(180, 71, 235, 0.2);
            border-color: var(--cyber-glow);
            transform: translateY(-2px);
        }
        
        .error-message, .success-message {
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 20px;
            font-size: 14px;
            display: none;
        }
        
        .error-message {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid #ef4444;
            color: #f87171;
        }
        
        .success-message {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid #22c55e;
            color: #4ade80;
        }
        
        .password-strength {
            height: 4px;
            background: #374151;
            border-radius: 2px;
            margin-top: 8px;
            overflow: hidden;
        }
        
        .password-strength-bar {
            height: 100%;
            border-radius: 2px;
            transition: all 0.3s ease;
            width: 0%;
        }
        
        .strength-weak { background: #ef4444; width: 25%; }
        .strength-fair { background: #f59e0b; width: 50%; }
        .strength-good { background: #10b981; width: 75%; }
        .strength-strong { background: #059669; width: 100%; }

        /* Additional glow effects */
        .glow-effect {
            position: absolute;
            border-radius: 50%;
            filter: blur(64px);
            pointer-events: none;
        }

        .glow-purple {
            top: 25%;
            left: 25%;
            width: 256px;
            height: 256px;
            background: var(--cyber-purple);
            opacity: 0.1;
        }

        .glow-blue {
            bottom: 25%;
            right: 25%;
            width: 192px;
            height: 192px;
            background: var(--cyber-blue);
            opacity: 0.1;
        }

        /* Animations */
        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 5px var(--cyber-glow), 0 0 10px var(--cyber-glow), 0 0 15px var(--cyber-glow);
                opacity: 0.6;
            }
            100% {
                box-shadow: 0 0 10px var(--cyber-glow), 0 0 20px var(--cyber-glow), 0 0 30px var(--cyber-glow);
                opacity: 1;
            }
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .auth-card {
                max-width: 500px;
                padding: 30px 20px;
            }

            .form-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .file-upload-group {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .auth-logo {
                font-size: 36px;
            }
        }

        @media (max-width: 480px) {
            .auth-card {
                padding: 20px 15px;
                margin: 10px;
            }

            .auth-logo {
                font-size: 32px;
            }

            .form-input {
                padding: 12px 40px 12px 12px;
                font-size: 14px;
            }

            .username-input {
                padding-left: 75px !important;
            }

            .username-prefix {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Background Effects -->
        <div class="background-gradient"></div>
        <div class="particles-container" id="particles"></div>
        
        <!-- Back to Home -->
        <a href="index.html" class="back-home">
            <i class='bx bx-arrow-back'></i>
            Back to Home
        </a>
        
        <!-- Auth Container -->
        <div class="auth-container">
            <div class="auth-card">
                <div class="auth-header">
                    <div class="auth-logo">SHYRED</div>
                    <div class="auth-subtitle">Tạo tài khoản MIZI mới</div>
                </div>
                
                <!-- Messages -->
                <div class="error-message" id="errorMessage"></div>
                <div class="success-message" id="successMessage"></div>
                
                <!-- Register Form -->
                <form id="registerForm">
                    <div class="form-container">
                        <!-- Left Column -->
                        <div class="form-left">
                            <div class="form-group">
                                <label class="form-label" for="email">Email *</label>
                                <div style="position: relative;">
                                    <input
                                        type="email"
                                        id="email"
                                        class="form-input"
                                        placeholder="Nhập địa chỉ email"
                                        required
                                    >
                                    <i class='bx bx-envelope input-icon'></i>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="phone">Số điện thoại *</label>
                                <div style="position: relative;">
                                    <input
                                        type="tel"
                                        id="phone"
                                        class="form-input"
                                        placeholder="Nhập số điện thoại"
                                        required
                                    >
                                    <i class='bx bx-phone input-icon'></i>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="username">Tên người dùng *</label>
                                <div style="position: relative;">
                                    <span class="username-prefix">@Mizi_</span>
                                    <input
                                        type="text"
                                        id="username"
                                        class="form-input username-input"
                                        placeholder="tên_của_bạn"
                                        required
                                    >
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Hình ảnh</label>
                                <div class="file-upload-group">
                                    <div class="file-upload" onclick="document.getElementById('avatar').click()">
                                        <input type="file" id="avatar" accept="image/*">
                                        <div class="file-upload-icon">
                                            <i class='bx bx-user'></i>
                                        </div>
                                        <div class="file-upload-text">Avatar</div>
                                        <div class="file-upload-hint">JPG, PNG (max 5MB)</div>
                                        <img class="file-preview avatar-preview" id="avatarPreview">
                                    </div>

                                    <div class="file-upload" onclick="document.getElementById('coverPhoto').click()">
                                        <input type="file" id="coverPhoto" accept="image/*">
                                        <div class="file-upload-icon">
                                            <i class='bx bx-image'></i>
                                        </div>
                                        <div class="file-upload-text">Ảnh bìa</div>
                                        <div class="file-upload-hint">JPG, PNG (max 10MB)</div>
                                        <img class="file-preview" id="coverPreview">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right Column -->
                        <div class="form-right">
                            <div class="form-group">
                                <label class="form-label" for="password">Mật khẩu *</label>
                                <div style="position: relative;">
                                    <input
                                        type="password"
                                        id="password"
                                        class="form-input"
                                        placeholder="Nhập mật khẩu"
                                        required
                                    >
                                    <i class='bx bx-lock-alt input-icon'></i>
                                </div>
                                <div class="password-strength">
                                    <div class="password-strength-bar" id="passwordStrengthBar"></div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="confirmPassword">Nhập lại mật khẩu *</label>
                                <div style="position: relative;">
                                    <input
                                        type="password"
                                        id="confirmPassword"
                                        class="form-input"
                                        placeholder="Nhập lại mật khẩu"
                                        required
                                    >
                                    <i class='bx bx-lock input-icon'></i>
                                </div>
                            </div>

                            <div class="terms-checkbox">
                                <input type="checkbox" id="termsAccepted" required>
                                <label for="termsAccepted" class="terms-text">
                                    Tôi đã đọc và đồng ý với
                                    <a href="#" onclick="showTermsModal(); return false;">Điều khoản sử dụng</a>,
                                    <a href="#" onclick="showPrivacyModal(); return false;">Chính sách bảo mật</a>
                                    và <a href="#" onclick="showCommunityModal(); return false;">Quy tắc cộng đồng MIZI</a>.
                                    Tôi xác nhận rằng tôi đã đủ 16 tuổi để tạo tài khoản.
                                </label>
                            </div>

                            <button type="submit" class="register-btn" id="registerBtn" disabled>
                                <span id="registerBtnText">Tạo tài khoản</span>
                            </button>
                        </div>
                    </div>
                </form>
                
                <div class="login-link">
                    Đã có tài khoản? <a href="login.html">Đăng nhập ngay</a>
                </div>
            </div>
        </div>
        
        <!-- Additional glow effects -->
        <div class="glow-effect glow-purple"></div>
        <div class="glow-effect glow-blue"></div>
    </div>

    <script>
        // Particle Effects System
        class ParticleSystem {
            constructor() {
                this.container = document.getElementById('particles');
                this.particles = [];
                this.maxParticles = 30;
                this.init();
            }

            init() {
                this.createParticles();
                this.animateParticles();
            }

            createParticles() {
                for (let i = 0; i < this.maxParticles; i++) {
                    this.createParticle();
                }
            }

            createParticle() {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Random position
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;
                
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                
                // Random animation properties
                const animationDelay = Math.random() * 2 + 's';
                const animationDuration = (2 + Math.random() * 3) + 's';
                
                particle.style.animationDelay = animationDelay;
                particle.style.animationDuration = animationDuration;
                
                this.container.appendChild(particle);
                this.particles.push({
                    element: particle,
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5
                });
            }

            animateParticles() {
                setInterval(() => {
                    this.particles.forEach(particle => {
                        particle.x += particle.vx;
                        particle.y += particle.vy;
                        
                        // Boundary check
                        if (particle.x < 0 || particle.x > window.innerWidth) {
                            particle.vx *= -1;
                        }
                        if (particle.y < 0 || particle.y > window.innerHeight) {
                            particle.vy *= -1;
                        }
                        
                        // Keep within bounds
                        particle.x = Math.max(0, Math.min(window.innerWidth, particle.x));
                        particle.y = Math.max(0, Math.min(window.innerHeight, particle.y));
                        
                        particle.element.style.left = particle.x + 'px';
                        particle.element.style.top = particle.y + 'px';
                    });
                }, 50);
            }
        }

        // Load and apply saved theme
        function loadSavedTheme() {
            const currentUser = JSON.parse(localStorage.getItem('shyred_current_user') || 'null');
            if (currentUser && currentUser.settings && currentUser.settings.theme) {
                const theme = currentUser.settings.theme;
                applyTheme(theme);
                console.log('Applied saved theme in register page:', theme);
            }
        }

        // Apply theme to page
        function applyTheme(theme) {
            const root = document.documentElement;
            root.style.setProperty('--cyber-purple', theme.primaryColor);
            root.style.setProperty('--cyber-blue', theme.secondaryColor);
            root.style.setProperty('--cyber-pink', theme.accentColor);
            root.style.setProperty('--cyber-glow', theme.primaryColor);
        }

        // Initialize particles when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            const particleSystem = new ParticleSystem();
            loadSavedTheme();
        });

        // Enable/disable register button based on terms acceptance
        document.getElementById('termsAccepted').addEventListener('change', function() {
            document.getElementById('registerBtn').disabled = !this.checked;
        });
        
        // Password strength checker
        document.getElementById('password').addEventListener('input', function() {
            const password = this.value;
            const strengthBar = document.getElementById('passwordStrengthBar');
            
            let strength = 0;
            if (password.length >= 8) strength++;
            if (password.match(/[a-z]+/)) strength++;
            if (password.match(/[A-Z]+/)) strength++;
            if (password.match(/[0-9]+/)) strength++;
            if (password.match(/[^a-zA-Z0-9]+/)) strength++;
            
            strengthBar.className = 'password-strength-bar';
            if (strength <= 2) strengthBar.classList.add('strength-weak');
            else if (strength <= 3) strengthBar.classList.add('strength-fair');
            else if (strength <= 4) strengthBar.classList.add('strength-good');
            else strengthBar.classList.add('strength-strong');
        });
        
        // File preview functionality
        function setupFilePreview(inputId, previewId) {
            document.getElementById(inputId).addEventListener('change', function(e) {
                const file = e.target.files[0];
                const preview = document.getElementById(previewId);
                
                if (file) {
                    // Check file size
                    const maxSize = inputId === 'avatar' ? 5 * 1024 * 1024 : 10 * 1024 * 1024; // 5MB for avatar, 10MB for cover
                    if (file.size > maxSize) {
                        showError(`File quá lớn. Kích thước tối đa: ${inputId === 'avatar' ? '5MB' : '10MB'}`);
                        this.value = '';
                        preview.style.display = 'none';
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
        
        setupFilePreview('avatar', 'avatarPreview');
        setupFilePreview('coverPhoto', 'coverPreview');
        
        // Form validation and submission
        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                email: document.getElementById('email').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                username: '@Mizi_' + document.getElementById('username').value.trim(),
                password: document.getElementById('password').value,
                confirmPassword: document.getElementById('confirmPassword').value,
                avatar: document.getElementById('avatar').files[0],
                coverPhoto: document.getElementById('coverPhoto').files[0],
                termsAccepted: document.getElementById('termsAccepted').checked
            };
            
            // Validation
            if (!validateForm(formData)) return;
            
            // Show loading state
            const registerBtn = document.getElementById('registerBtn');
            const registerBtnText = document.getElementById('registerBtnText');
            registerBtn.disabled = true;
            registerBtnText.textContent = 'Đang tạo tài khoản...';
            
            // Simulate registration process
            setTimeout(() => {
                try {
                    // Check if user already exists
                    const existingUsers = JSON.parse(localStorage.getItem('shyred_users') || '[]');
                    const userExists = existingUsers.some(u => 
                        u.email === formData.email || 
                        u.phone === formData.phone || 
                        u.username === formData.username
                    );
                    
                    if (userExists) {
                        showError('Email, số điện thoại hoặc tên người dùng đã được sử dụng!');
                        registerBtn.disabled = false;
                        registerBtnText.textContent = 'Tạo tài khoản';
                        return;
                    }
                    
                    // Process images
                    const processUserData = async () => {
                        const userData = {
                            id: Date.now(),
                            email: formData.email,
                            phone: formData.phone,
                            username: formData.username,
                            password: formData.password,
                            joinDate: new Date().toISOString(),
                            settings: {
                                theme: {
                                    primaryColor: '#b447eb',
                                    secondaryColor: '#2b6cee',
                                    accentColor: '#e963bc'
                                }
                            }
                        };
                        
                        // Convert avatar to base64 if provided
                        if (formData.avatar) {
                            userData.avatar = await fileToBase64(formData.avatar);
                        }
                        
                        // Convert cover photo to base64 if provided
                        if (formData.coverPhoto) {
                            userData.coverPhoto = await fileToBase64(formData.coverPhoto);
                        }
                        
                        // Save user
                        existingUsers.push(userData);
                        localStorage.setItem('shyred_users', JSON.stringify(existingUsers));
                        
                        // Show success message
                        showSuccess('Tài khoản đã được tạo thành công! Vui lòng đăng nhập.');
                        
                        // Redirect to login after 2 seconds
                        setTimeout(() => {
                            window.location.href = 'login.html';
                        }, 2000);
                    };
                    
                    processUserData();
                    
                } catch (error) {
                    console.error('Registration error:', error);
                    showError('Có lỗi xảy ra khi tạo tài khoản. Vui lòng thử lại!');
                    registerBtn.disabled = false;
                    registerBtnText.textContent = 'Tạo tài khoản';
                }
            }, 1500);
        });
        
        function validateForm(data) {
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(data.email)) {
                showError('Email không hợp lệ!');
                return false;
            }
            
            // Phone validation
            const phoneRegex = /^[0-9]{10,11}$/;
            if (!phoneRegex.test(data.phone)) {
                showError('Số điện thoại phải có 10-11 chữ số!');
                return false;
            }
            
            // Username validation
            const usernamePattern = /^[a-zA-Z0-9_]+$/;
            const usernameOnly = data.username.replace('@Mizi_', '');
            if (usernameOnly.length < 3 || !usernamePattern.test(usernameOnly)) {
                showError('Tên người dùng phải có ít nhất 3 ký tự và chỉ chứa chữ, số, dấu gạch dưới!');
                return false;
            }
            
            // Password validation
            if (data.password.length < 8) {
                showError('Mật khẩu phải có ít nhất 8 ký tự!');
                return false;
            }
            
            if (data.password !== data.confirmPassword) {
                showError('Mật khẩu nhập lại không khớp!');
                return false;
            }
            
            if (!data.termsAccepted) {
                showError('Vui lòng đồng ý với điều khoản sử dụng!');
                return false;
            }
            
            return true;
        }
        
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }
        
        function showError(message) {
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');
            successMessage.style.display = 'none';
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        function showSuccess(message) {
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');
            errorMessage.style.display = 'none';
            successMessage.textContent = message;
            successMessage.style.display = 'block';
            successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
        
        // Terms modals (simplified for demo)
        function showTermsModal() {
            alert('Điều khoản sử dụng MIZI:\n\n1. Tôn trọng cộng đồng và không spam\n2. Không chia sẻ nội dung có hại\n3. Bảo vệ thông tin cá nhân\n4. Tuân thủ pháp luật Việt Nam\n5. Chịu trách nhiệm về nội dung đăng tải');
        }
        
        function showPrivacyModal() {
            alert('Chính sách bảo mật:\n\n- Thông tin cá nhân được bảo vệ an toàn\n- Không chia sẻ dữ liệu cho bên thứ 3\n- Sử dụng mã hóa để bảo vệ mật khẩu\n- Quyền kiểm soát dữ liệu của bạn');
        }
        
        function showCommunityModal() {
            alert('Quy tắc cộng đồng MIZI:\n\n- Tôn trọng lẫn nhau\n- Không bắt nạt hay quấy rối\n- Nội dung tích cực, lành mạnh\n- Hỗ trợ thành viên khác\n- Báo cáo vi phạm để xây dựng cộng đồng tốt đẹp');
        }
    </script>
</body>
</html>
