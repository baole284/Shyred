<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHYRED - Marketplace</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #0a0b1a;
            color: white;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* CSS Variables */
        :root {
            --cyber-dark: hsl(230, 25%, 3%);
            --cyber-purple: hsl(280, 90%, 65%);
            --cyber-blue: hsl(220, 90%, 60%);
            --cyber-pink: hsl(320, 85%, 70%);
            --cyber-glow: hsl(280, 100%, 75%);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--cyber-purple);
            border-radius: 4px;
            opacity: 0.7;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--cyber-glow);
            opacity: 1;
        }

        /* Container */
        .container {
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }

        /* Background Effects */
        .background-gradient {
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--cyber-dark) 0%, var(--cyber-dark) 60%, var(--cyber-purple) 100%);
            opacity: 0.2;
            z-index: 1;
        }

        .particles-container {
            position: absolute;
            inset: 0;
            z-index: 2;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--cyber-glow);
            border-radius: 50%;
            opacity: 0.6;
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }

        /* Navigation */
        .navigation {
            position: relative;
            z-index: 100;
            padding: 24px 32px;
            background: rgba(10, 11, 26, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(180, 71, 235, 0.2);
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            font-size: 32px;
            font-weight: bold;
            color: var(--cyber-glow);
            text-shadow: 0 0 20px var(--cyber-glow);
        }

        .nav-links {
            display: flex;
            gap: 48px;
            align-items: center;
        }

        .nav-link {
            color: #9ca3af;
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            transition: color 0.3s ease;
            letter-spacing: 0.5px;
        }

        .nav-link:hover,
        .nav-link.active {
            color: var(--cyber-glow);
            text-shadow: 0 0 10px var(--cyber-glow);
        }

        .cart-icon {
            position: relative;
            font-size: 24px;
            color: var(--cyber-glow);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cart-icon:hover {
            transform: scale(1.1);
            text-shadow: 0 0 20px var(--cyber-glow);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: var(--cyber-pink);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* Main Content */
        .marketplace-container {
            position: relative;
            z-index: 10;
            padding: 40px 32px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .marketplace-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .marketplace-title {
            font-size: 72px;
            font-weight: 900;
            background: linear-gradient(45deg, var(--cyber-purple), var(--cyber-blue), var(--cyber-pink));
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
            letter-spacing: -2px;
        }

        .marketplace-subtitle {
            font-size: 20px;
            color: #d1d5db;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Stats Bar */
        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .stat-card {
            background: rgba(10, 11, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(180, 71, 235, 0.2);
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            border-color: var(--cyber-glow);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(180, 71, 235, 0.3);
        }

        .stat-number {
            font-size: 36px;
            font-weight: bold;
            color: var(--cyber-glow);
            margin-bottom: 10px;
        }

        .stat-label {
            color: #9ca3af;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Filter Section */
        .filter-section {
            background: rgba(10, 11, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(180, 71, 235, 0.2);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .filter-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--cyber-glow);
        }

        .search-bar {
            position: relative;
            max-width: 400px;
        }

        .search-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(180, 71, 235, 0.3);
            border-radius: 50px;
            padding: 15px 50px 15px 20px;
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--cyber-glow);
            box-shadow: 0 0 20px rgba(180, 71, 235, 0.3);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--cyber-glow);
            font-size: 20px;
        }

        .filter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .filter-label {
            color: #d1d5db;
            font-weight: 600;
            font-size: 14px;
        }

        .filter-select {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(180, 71, 235, 0.3);
            border-radius: 8px;
            padding: 12px;
            color: white;
            font-size: 14px;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(180, 71, 235, 0.3);
            border-radius: 25px;
            padding: 8px 16px;
            color: #d1d5db;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn.active,
        .filter-btn:hover {
            background: var(--cyber-purple);
            border-color: var(--cyber-glow);
            color: white;
        }

        /* Product Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .product-card {
            background: rgba(10, 11, 26, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(180, 71, 235, 0.2);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .product-card:hover {
            border-color: var(--cyber-glow);
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(180, 71, 235, 0.3);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: linear-gradient(45deg, var(--cyber-purple), var(--cyber-blue));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: white;
            position: relative;
        }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--cyber-pink);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .product-info {
            padding: 20px;
        }

        .product-seller {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
        }

        .seller-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--cyber-glow);
        }

        .seller-name {
            color: var(--cyber-glow);
            font-size: 12px;
            font-weight: 600;
        }

        .product-title {
            font-size: 18px;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .product-description {
            color: #9ca3af;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .price-current {
            font-size: 24px;
            font-weight: bold;
            color: var(--cyber-glow);
        }

        .price-old {
            color: #6b7280;
            text-decoration: line-through;
            font-size: 14px;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 14px;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--cyber-purple), var(--cyber-blue));
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(180, 71, 235, 0.4);
        }

        .btn-icon {
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid rgba(180, 71, 235, 0.3);
            color: var(--cyber-glow);
            width: 44px;
            height: 44px;
            padding: 0;
        }

        .btn-icon:hover {
            background: var(--cyber-purple);
            color: white;
        }

        /* Floating Cart */
        .floating-cart {
            position: fixed;
            top: 50%;
            right: -350px;
            transform: translateY(-50%);
            width: 350px;
            height: 80vh;
            background: rgba(10, 11, 26, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(180, 71, 235, 0.3);
            border-radius: 16px 0 0 16px;
            padding: 20px;
            transition: all 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
        }

        .floating-cart.open {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(180, 71, 235, 0.2);
        }

        .cart-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--cyber-glow);
        }

        .close-cart {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 24px;
            cursor: pointer;
        }

        .cart-items {
            margin-bottom: 30px;
        }

        .cart-item {
            display: flex;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid rgba(180, 71, 235, 0.1);
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            background: var(--cyber-purple);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-title {
            font-size: 14px;
            font-weight: 600;
            color: white;
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--cyber-glow);
            font-weight: bold;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .qty-btn {
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(180, 71, 235, 0.3);
            color: var(--cyber-glow);
            width: 24px;
            height: 24px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 12px;
        }

        .cart-total {
            padding: 20px 0;
            border-top: 1px solid rgba(180, 71, 235, 0.2);
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .total-label {
            color: #9ca3af;
        }

        .total-value {
            color: white;
            font-weight: 600;
        }

        .total-final {
            font-size: 18px;
            font-weight: bold;
            color: var(--cyber-glow);
        }

        /* Glow Effects */
        .glow-effect {
            position: absolute;
            border-radius: 50%;
            filter: blur(64px);
            pointer-events: none;
        }

        .glow-purple {
            top: 10%;
            left: 10%;
            width: 300px;
            height: 300px;
            background: var(--cyber-purple);
            opacity: 0.1;
        }

        .glow-blue {
            bottom: 10%;
            right: 10%;
            width: 400px;
            height: 400px;
            background: var(--cyber-blue);
            opacity: 0.1;
        }

        /* Animations */
        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 5px var(--cyber-glow), 0 0 10px var(--cyber-glow), 0 0 15px var(--cyber-glow);
                opacity: 0.6;
            }
            100% {
                box-shadow: 0 0 10px var(--cyber-glow), 0 0 20px var(--cyber-glow), 0 0 30px var(--cyber-glow);
                opacity: 1;
            }
        }

        @keyframes slideInUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .product-card {
            animation: slideInUp 0.5s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .marketplace-container {
                padding: 20px 16px;
            }

            .marketplace-title {
                font-size: 48px;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
            }

            .nav-links {
                gap: 24px;
            }

            .stats-bar {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }

            .filter-controls {
                grid-template-columns: 1fr;
            }

            .floating-cart {
                width: 100%;
                right: -100%;
                border-radius: 16px 16px 0 0;
                height: 70vh;
                top: auto;
                bottom: -70vh;
                transform: none;
            }

            .floating-cart.open {
                bottom: 0;
                right: 0;
            }

                    @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Background Effects -->
        <div class="background-gradient"></div>
        <div class="particles-container" id="particles"></div>
        
        <!-- Navigation -->
        <nav class="navigation">
            <div class="nav-content">
                <div class="logo">SHYRED</div>
                <div class="nav-links">
                    <a href="index.html" class="nav-link">HOME</a>
                    <a href="video.html" class="nav-link">VIDEO</a>
                    <a href="marketplace.html" class="nav-link active">MARKETPLACE</a>
                    <a href="chatting.html" class="nav-link">CHATTING</a>
                    <div class="cart-icon" onclick="toggleCart()">
                        <i class='bx bx-shopping-bag'></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Marketplace Content -->
        <div class="marketplace-container">
            <!-- Header -->
            <div class="marketplace-header">
                <h1 class="marketplace-title">MIZI SHOP</h1>
                <p class="marketplace-subtitle">
                    Khám phá thế giới mua sắm tương lai với những sản phẩm độc đáo và công nghệ tiên tiến. 
                    Nơi kết nối người mua và người bán trong không gian Cyberpunk.
                </p>
            </div>

            <!-- Stats Bar -->
            <div class="stats-bar">
                <div class="stat-card">
                    <div class="stat-number" id="totalProducts">247</div>
                    <div class="stat-label">Sản phẩm</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalSellers">89</div>
                    <div class="stat-label">Người bán</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalSales">1,456</div>
                    <div class="stat-label">Đã bán</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="onlineUsers">23</div>
                    <div class="stat-label">Đang online</div>
                </div>
            </div>

            <!-- Filter Section -->
            <div class="filter-section">
                <div class="filter-header">
                    <h3 class="filter-title">Tìm kiếm & Lọc sản phẩm</h3>
                    <div class="search-bar">
                        <input type="text" class="search-input" placeholder="Tìm kiếm sản phẩm..." id="searchInput">
                        <i class='bx bx-search search-icon'></i>
                    </div>
                </div>
                
                <div class="filter-controls">
                    <div class="filter-group">
                        <label class="filter-label">Danh mục</label>
                        <select class="filter-select" id="categoryFilter">
                            <option value="">Tất cả danh mục</option>
                            <option value="tech">Công nghệ</option>
                            <option value="fashion">Thời trang</option>
                            <option value="gaming">Gaming</option>
                            <option value="art">Nghệ thuật</option>
                            <option value="crypto">Crypto</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Giá cả</label>
                        <select class="filter-select" id="priceFilter">
                            <option value="">Tất cả giá</option>
                            <option value="0-100">< 100,000đ</option>
                            <option value="100-500">100,000đ - 500,000đ</option>
                            <option value="500-1000">500,000đ - 1,000,000đ</option>
                            <option value="1000+"> > 1,000,000đ</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Sắp xếp</label>
                        <select class="filter-select" id="sortFilter">
                            <option value="newest">Mới nhất</option>
                            <option value="price-low">Giá thấp - cao</option>
                            <option value="price-high">Giá cao - thấp</option>
                            <option value="popular">Phổ biến nhất</option>
                            <option value="rating">Đánh giá cao</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label">Trạng thái</label>
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-status="all">Tất cả</button>
                            <button class="filter-btn" data-status="new">Mới</button>
                            <button class="filter-btn" data-status="sale">Sale</button>
                            <button class="filter-btn" data-status="hot">Hot</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Grid -->
            <div class="products-grid" id="productsGrid">
                <!-- Products will be dynamically loaded here -->
            </div>
        </div>

        <!-- Floating Cart -->
        <div class="floating-cart" id="floatingCart">
            <div class="cart-header">
                <h3 class="cart-title">Giỏ hàng</h3>
                <button class="close-cart" onclick="toggleCart()">
                    <i class='bx bx-x'></i>
                </button>
            </div>
            
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be dynamically loaded -->
            </div>
            
            <div class="cart-total">
                <div class="total-row">
                    <span class="total-label">Tạm tính:</span>
                    <span class="total-value" id="subtotal">0đ</span>
                </div>
                <div class="total-row">
                    <span class="total-label">Phí vận chuyển:</span>
                    <span class="total-value" id="shipping">30,000đ</span>
                </div>
                <div class="total-row">
                    <span class="total-label total-final">Tổng cộng:</span>
                    <span class="total-value total-final" id="total">30,000đ</span>
                </div>
                
                <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="checkout()">
                    <i class='bx bx-credit-card'></i>
                    THANH TOÁN
                </button>
            </div>
        </div>

        <!-- Glow Effects -->
        <div class="glow-effect glow-purple"></div>
        <div class="glow-effect glow-blue"></div>
    </div>

    <script>
        // Sample products data
        const products = [
            {
                id: 1,
                title: "Cyberpunk VR Headset Pro",
                description: "Trải nghiệm thực tế ảo cực đỉnh với công nghệ tương lai. Độ phân giải 4K, âm thanh 360°.",
                price: 2500000,
                oldPrice: 3000000,
                category: "tech",
                seller: "TechMaster",
                status: "hot",
                rating: 4.8,
                image: "🥽",
                badge: "HOT"
            },
            {
                id: 2,
                title: "Neon Fashion Jacket",
                description: "Áo khoác phong cách Cyberpunk với đèn LED tích hợp. Chống nước, pin 12 giờ.",
                price: 850000,
                oldPrice: null,
                category: "fashion",
                seller: "StyleCorp",
                status: "new",
                rating: 4.5,
                image: "🧥",
                badge: "NEW"
            },
            {
                id: 3,
                title: "Quantum Gaming Mouse",
                description: "Chuột gaming với cảm biến lượng tử, độ chính xác tuyệt đ��i. RGB 16 triệu màu.",
                price: 450000,
                oldPrice: 600000,
                category: "gaming",
                seller: "GameZone",
                status: "sale",
                rating: 4.9,
                image: "🖱️",
                badge: "SALE"
            },
            {
                id: 4,
                title: "Digital Art NFT Collection",
                description: "Bộ sưu tập nghệ thuật số độc đáo, limited edition. Bao gồm quyền sở hữu trí tuệ.",
                price: 1200000,
                oldPrice: null,
                category: "art",
                seller: "ArtisticAI",
                status: "new",
                rating: 4.7,
                image: "🎨",
                badge: "LIMITED"
            },
            {
                id: 5,
                title: "Crypto Wallet Device",
                description: "Ví lạnh bảo mật tối đa cho cryptocurrency. Hỗ trợ 100+ loại coin, bảo mật vân tay.",
                price: 750000,
                oldPrice: 900000,
                category: "crypto",
                seller: "CryptoSafe",
                status: "hot",
                rating: 4.6,
                image: "💳",
                badge: "SECURE"
            },
            {
                id: 6,
                title: "Holographic Display Screen",
                description: "Màn hình hologram 27 inch, độ phân giải 8K. Công nghệ hiển thị không gian 3D.",
                price: 5500000,
                oldPrice: 6500000,
                category: "tech",
                seller: "FutureTech",
                status: "sale",
                rating: 4.9,
                image: "📺",
                badge: "PREMIUM"
            }

            
        ];

        let cart = [];
        let filteredProducts = [...products];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedTheme();
            createParticles();
            renderProducts();
            updateCartCount();
            setupFilters();
        });

        // Theme loading
        function loadSavedTheme() {
            const currentUser = JSON.parse(localStorage.getItem('shyred_current_user') || 'null');
            if (currentUser && currentUser.settings && currentUser.settings.theme) {
                const theme = currentUser.settings.theme;
                applyTheme(theme);
            }
        }

        function applyTheme(theme) {
            const root = document.documentElement;
            root.style.setProperty('--cyber-purple', theme.primaryColor);
            root.style.setProperty('--cyber-blue', theme.secondaryColor);
            root.style.setProperty('--cyber-pink', theme.accentColor);
            root.style.setProperty('--cyber-glow', theme.primaryColor);
            
            // Update background gradient
            const backgroundGradient = document.querySelector('.background-gradient');
            if (backgroundGradient) {
                const rgb = hexToRgb(theme.primaryColor);
                backgroundGradient.style.background = `linear-gradient(135deg, var(--cyber-dark) 0%, var(--cyber-dark) 60%, rgba(${rgb}, 0.2) 100%)`;
            }
        }

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? 
                `${parseInt(result[1], 16)}, ${parseInt(result[2], 16)}, ${parseInt(result[3], 16)}` : 
                '180, 71, 235';
        }

        // Particle system
        function createParticles() {
            const container = document.getElementById('particles');
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * window.innerWidth + 'px';
                particle.style.top = Math.random() * window.innerHeight + 'px';
                particle.style.animationDelay = Math.random() * 2 + 's';
                particle.style.animationDuration = (2 + Math.random() * 3) + 's';
                container.appendChild(particle);
            }
        }

        // Render products
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';

            filteredProducts.forEach((product, index) => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.style.animationDelay = (index * 0.1) + 's';
                
                productCard.innerHTML = `
                    <div class="product-image">
                        ${product.image}
                        ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                    </div>
                    <div class="product-info">
                        <div class="product-seller">
                            <div class="seller-avatar"></div>
                            <span class="seller-name">@${product.seller}</span>
                        </div>
                        <h3 class="product-title">${product.title}</h3>
                        <p class="product-description">${product.description}</p>
                        <div class="product-price">
                            <div>
                                <span class="price-current">${formatPrice(product.price)}</span>
                                ${product.oldPrice ? `<span class="price-old">${formatPrice(product.oldPrice)}</span>` : ''}
                            </div>
                            <div style="color: var(--cyber-glow); font-size: 14px;">
                                ⭐ ${product.rating}
                            </div>
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary" onclick="addToCart(${product.id})">
                                <i class='bx bx-cart'></i>
                                Thêm vào giỏ
                            </button>
                            <button class="btn btn-icon" onclick="toggleWishlist(${product.id})">
                                <i class='bx bx-heart'></i>
                            </button>
                            <button class="btn btn-icon" onclick="viewProduct(${product.id})">
                                <i class='bx bx-show'></i>
                            </button>
                        </div>
                    </div>
                `;
                
                grid.appendChild(productCard);
            });
        }

        // Cart functions
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            
            updateCartDisplay();
            showNotification(`Đã thêm "${product.title}" vào giỏ hàng!`, 'success');
        }

        function removeFromCart(productId) {
            const index = cart.findIndex(item => item.id === productId);
            if (index > -1) {
                cart.splice(index, 1);
                updateCartDisplay();
            }
        }

        function updateQuantity(productId, delta) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += delta;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCartDisplay();
                }
            }
        }

        function updateCartDisplay() {
            updateCartCount();
            renderCartItems();
            updateCartTotal();
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = count;
        }

        function renderCartItems() {
            const container = document.getElementById('cartItems');
            
            if (cart.length === 0) {
                container.innerHTML = '<div style="text-align: center; color: #9ca3af; padding: 40px;">Giỏ hàng trống</div>';
                return;
            }
            
            container.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <div class="cart-item-image">${item.image}</div>
                    <div class="cart-item-info">
                        <div class="cart-item-title">${item.title}</div>
                        <div class="cart-item-price">${formatPrice(item.price)}</div>
                        <div class="cart-item-controls">
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                            <span style="color: white; font-weight: 600; min-width: 20px; text-align: center;">${item.quantity}</span>
                            <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                            <button class="qty-btn" onclick="removeFromCart(${item.id})" style="margin-left: auto; color: #ef4444;">
                                <i class='bx bx-trash'></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateCartTotal() {
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = cart.length > 0 ? 30000 : 0;
            const total = subtotal + shipping;
            
            document.getElementById('subtotal').textContent = formatPrice(subtotal);
            document.getElementById('shipping').textContent = formatPrice(shipping);
            document.getElementById('total').textContent = formatPrice(total);
        }

        function toggleCart() {
            const cart = document.getElementById('floatingCart');
            cart.classList.toggle('open');
        }

        function checkout() {
            if (cart.length === 0) {
                showNotification('Giỏ hàng trống!', 'error');
                return;
            }
            
            showNotification('Đang chuyển đến trang thanh toán...', 'success');
            // Here you would typically redirect to a checkout page
            setTimeout(() => {
                cart = [];
                updateCartDisplay();
                toggleCart();
                showNotification('Đặt hàng thành công! Cảm ơn bạn đã mua sắm tại MIZI!', 'success');
            }, 2000);
        }

        // Filter functions
        function setupFilters() {
            document.getElementById('searchInput').addEventListener('input', filterProducts);
            document.getElementById('categoryFilter').addEventListener('change', filterProducts);
            document.getElementById('priceFilter').addEventListener('change', filterProducts);
            document.getElementById('sortFilter').addEventListener('change', filterProducts);
            
            document.querySelectorAll('[data-status]').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('[data-status]').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterProducts();
                });
            });
        }

        function filterProducts() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const priceRange = document.getElementById('priceFilter').value;
            const sort = document.getElementById('sortFilter').value;
            const status = document.querySelector('[data-status].active').dataset.status;
            
            // Filter products
            filteredProducts = products.filter(product => {
                const matchesSearch = product.title.toLowerCase().includes(search) || 
                                    product.description.toLowerCase().includes(search);
                const matchesCategory = !category || product.category === category;
                const matchesStatus = status === 'all' || product.status === status;
                
                let matchesPrice = true;
                if (priceRange) {
                    const [min, max] = priceRange.split('-').map(p => p.replace('+', '') * 1000);
                    if (max) {
                        matchesPrice = product.price >= min && product.price <= max;
                    } else {
                        matchesPrice = product.price >= min;
                    }
                }
                
                return matchesSearch && matchesCategory && matchesStatus && matchesPrice;
            });
            
            // Sort products
            switch (sort) {
                case 'price-low':
                    filteredProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    filteredProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'rating':
                    filteredProducts.sort((a, b) => b.rating - a.rating);
                    break;
                case 'oldest':
                    filteredProducts.sort((a, b) => a.id - b.id);
                    break;
                default: // newest
                    filteredProducts.sort((a, b) => b.id - a.id);
            }
            
            renderProducts();
        }

        // Utility functions
        function formatPrice(price) {
            return new Intl.NumberFormat('vi-VN', {
                style: 'currency',
                currency: 'VND',
                minimumFractionDigits: 0
            }).format(price);
        }

        function viewProduct(productId) {
            const product = products.find(p => p.id === productId);
            showNotification(`Xem chi tiết "${product.title}"`, 'info');
            // Here you would typically open a product detail modal or navigate to product page
        }

        function toggleWishlist(productId) {
            const product = products.find(p => p.id === productId);
            showNotification(`Đã thêm "${product.title}" vào danh sách yêu thích!`, 'success');
            // Here you would typically save to wishlist
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? 'var(--cyber-blue)' : type === 'error' ? '#ef4444' : 'var(--cyber-purple)'};
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                animation: slideInRight 0.5s ease;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
                max-width: 300px;
                word-wrap: break-word;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }
    </script>
</body>
</html>
